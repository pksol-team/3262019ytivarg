var GFPipeSettings=function(){var a=this,b=jQuery;a.init=function(){a.$elem={settingsFields:{width:b("#piperecorder_width"),height:b("#piperecorder_height"),recording_time:b("#piperecorder_recording_time"),bottom_menu:b("#piperecorder_bottom_menu"),autosave:b("#piperecorder_autosave"),audio_only:b("#piperecorder_audio_only"),mirror:b("#piperecorder_mirror"),environment:b("#piperecorder_environment"),resolution:{all:b('input[name="piperecorder_resolution"]'),"240p":b("#piperecorder_resolution_240p"),"300p":b("#piperecorder_resolution_300p"),"480p":b("#piperecorder_resolution_480p"),"720p":b("#piperecorder_resolution_720p")}}},a.bindFieldAdded(),a.bindFieldLoad(),a.bindFieldEvents(),gform.addFilter("gform_form_editor_can_field_be_added",a.canFieldBeAdded)},a.bindFieldAdded=function(){jQuery(document).bind("gform_field_added",function(b,c,d){"pipe_recorder"===d.type&&(d.pipe={resolution:"300p",width:400,height:300,recording_time:120,bottom_menu:!0,autosave:!0,mirror:!1,audio_only:!1,environment:a.$elem.settingsFields.environment.find("option").eq(0).attr("value")})})},a.bindFieldEvents=function(){a.$elem.settingsFields.resolution.all.on("change",function(b){a.getSelectedField().pipe.resolution=b.target.value}),a.$elem.settingsFields.width.on("change",function(b){a.getSelectedField().pipe.width=b.target.value}),a.$elem.settingsFields.height.on("change",function(b){a.getSelectedField().pipe.height=b.target.value}),a.$elem.settingsFields.recording_time.on("change",function(b){a.getSelectedField().pipe.recording_time=b.target.value}),a.$elem.settingsFields.bottom_menu.on("change",function(b){a.getSelectedField().pipe.bottom_menu=b.target.checked}),a.$elem.settingsFields.autosave.on("change",function(b){a.getSelectedField().pipe.autosave=b.target.checked}),a.$elem.settingsFields.audio_only.on("change",function(b){a.getSelectedField().pipe.audio_only=b.target.checked}),a.$elem.settingsFields.mirror.on("change",function(b){a.getSelectedField().pipe.mirror=b.target.checked}),a.$elem.settingsFields.environment.on("change",function(b){a.getSelectedField().pipe.environment=b.target.value})},a.bindFieldLoad=function(){b(document).bind("gform_load_field_settings",function(b,c){var c=a.getSelectedField(c);"pipe_recorder"===c.type&&(a.$elem.settingsFields.resolution[c.pipe.resolution].prop("checked",!0),a.$elem.settingsFields.width.val(c.pipe.width),a.$elem.settingsFields.height.val(c.pipe.height),a.$elem.settingsFields.recording_time.val(c.pipe.recording_time),a.$elem.settingsFields.environment.val(c.pipe.environment),a.$elem.settingsFields.bottom_menu.prop("checked",c.pipe.bottom_menu),a.$elem.settingsFields.autosave.prop("checked",c.pipe.autosave),a.$elem.settingsFields.audio_only.prop("checked",c.pipe.audio_only),a.$elem.settingsFields.mirror.prop("checked",c.pipe.mirror))})},a.canFieldBeAdded=function(a,b){return"pipe_recorder"!==b?a:!(GetFieldsByType(["pipe_recorder"]).length>0)||(alert(gravityformspipe_form_editor_strings.cannot_add),!1)},a.getField=function(a){if(!form)return null;for(var b=0;b<form.fields.length;b++)if(a==form.fields[b].id)return form.fields[b];return null},a.getSelectedField=function(b){var b=null==b?GetSelectedField():b;return b.pipe||"pipe_recorder"!==b.type||(b.pipe={resolution:"300p",width:400,height:300,recording_time:120,bottom_menu:!0,autosave:!0,mirror:!1,audio_only:!1,environment:a.$elem.settingsFields.environment.find("option").eq(0).attr("value")}),b},a.init()};jQuery(document).ready(function(){window.GFPipeSettings=new GFPipeSettings});